(()=>{"use strict";var e=document.querySelector(".base__select"),t=document.querySelector(".symbol__select"),r=document.querySelector(".base__input"),a=document.querySelector(".symbol__input"),n=document.querySelector(".base__arrow"),o=document.querySelector(".symbol__arrow"),s={base:1,symbol:0};function c(e){r.value=Number(e.toFixed(4))}var u=["AUD","BGN","BRL","BYN","CAD","CHF","CNY","CZK","DKK","GBP","HKD","HRK","HUF","IDR","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","NZD","PHP","PLN","RON","RUB","SEK","SGD","THB","TRY","USD","ZAR"];function l(r){u.forEach((function(a){var n=document.createElement("option");switch(n.setAttribute("value","".concat(a)),r){case"base":"USD"===a&&n.setAttribute("selected",""),e.append(n);break;case"symbol":"CAD"===a&&n.setAttribute("selected",""),t.append(n)}n.textContent=a}))}var i=document.querySelector(".error"),d=[i,r,a,e,t],b=["error--visible","base__input-error","symbol__input-error","base__select-error","symbol__select-error"];function v(e){switch(e){case void 0:case"base":var t=Number(r.value)*s.symbol;n=t,a.value=Number(n.toFixed(4));break;case"symbol":c(s.base/s.symbol*Number(a.value))}var n}function m(e,t){var n="https://api.ratesapi.io/api/latest?base=".concat(e,"&symbols=").concat(t);fetch(n).then((function(e){e.json().then((function(t){return e.ok?t:Promise.reject(new Error(t.error))})).then((function(e){var n=e.rates[t];""===r.value&&c(1),s.symbol=n,v(),function(){for(var e=0;e<d.length;e++)d[e].classList.remove(b[e]);r.disabled=!1,a.disabled=!1,setTimeout((function(){return i.innerHTML="&nbsp;"}),600)}()})).catch((function(e){!function(e){i.innerHTML=e;for(var t=0;t<d.length;t++)d[t].classList.add(b[t]);r.disabled=!0,a.disabled=!0,r.value="",a.value=""}(e),console.error(e)}))}))}var y,f,h,L,_,p,S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],w=["January","February","March","April","May","June","July","August","September","October","November","December"];y=document.querySelector(".date"),f=new Date,h=f.getDay(),L=f.getDate(),_=f.getMonth(),p=f.getFullYear(),y.textContent="For today, ".concat(S[h],", \n  ").concat(w[_]," ").concat(L,", ").concat(p),l("base"),l("symbol"),m("USD","CAD");var D=!1;function N(e){(D=!D)?function(e){switch(e){case"base":n.classList.add("arrow--rotate");break;case"symbol":o.classList.add("arrow--rotate")}}(e):"base"===e?n.classList.remove("arrow--rotate"):o.classList.remove("arrow--rotate")}function g(){m(e.value,t.value)}function A(e){for(;"0"===r.value.charAt(0)&&1!==r.value.length&&"."!=r.value.charAt(1);)r.value=r.value.substr(1,r.value.length-1);switch(e){case"base":if(""===r.value)return a.value="",null;v(e);break;case"symbol":if(""===a.value)return r.value="",null;v(e)}}e.addEventListener("click",(function(){return N("base")})),t.addEventListener("click",(function(){return N("symbol")})),e.addEventListener("change",(function(){return g()})),t.addEventListener("change",(function(){return g()})),r.addEventListener("input",(function(){return A("base")})),a.addEventListener("input",(function(){return A("symbol")})),window.addEventListener("click",(function(e){e.target.className.includes("arrow")||e.target.className.includes("select")||(D=!1,n.classList.remove("arrow--rotate"),o.classList.remove("arrow--rotate"))}))})();